<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Hotel Management System - Check-in</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Pacifico&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'hotel-green': '#10b981',
                        'hotel-red': '#ef4444',
                        'hotel-yellow': '#f59e0b',
                        'hotel-blue': '#3b82f6',
                        'hotel-purple': '#8b5cf6',
                    }
                }
            }
        }
    </script>
    <style>
        .font-poppins {
            font-family: 'Poppins', sans-serif;
        }

        .font-pacifico {
            font-family: 'Pacifico', cursive;
        }

        .room-grid-container {
            scrollbar-width: thin;
            scrollbar-color: #4b5563 #1f2937;
        }

        .room-grid-container::-webkit-scrollbar {
            height: 8px;
        }

        .room-grid-container::-webkit-scrollbar-track {
            background: #1f2937;
            border-radius: 4px;
        }

        .room-grid-container::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 4px;
        }

        .room-grid-container::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
    </style>
</head>

<body class="bg-gray-900 text-white min-h-screen font-poppins">
    <div class="max-w-7xl mx-auto p-4">
        <div class="flex justify-between items-center mb-8 pb-6 border-b border-gray-600">
            <h1 class="text-3xl font-bold">Check-in</h1>
            <a href="{% url 'dashboard' %}"
                class="inline-flex items-center px-4 py-2 border border-gray-600 text-gray-300 rounded hover:bg-gray-700 transition-colors">
                <i class="fas fa-arrow-left mr-1"></i> Back to Dashboard
            </a>
        </div>

        <!-- Room Availability Bar -->
        

            <!-- Status Legend -->
            <div class="flex flex-wrap gap-4 mb-4 text-sm">
                <div class="flex items-center">
                    <div class="w-3 h-3 rounded-full bg-hotel-green mr-2"></div>
                    <span>Available ({{ available_count }})</span>
                </div>
                <div class="flex items-center">
                    <div class="w-3 h-3 rounded-full bg-hotel-red mr-2"></div>
                    <span>Occupied ({{ occupied_count }})</span>
                </div>
                <div class="flex items-center">
                    <div class="w-3 h-3 rounded-full bg-hotel-yellow mr-2"></div>
                    <span>Maintenance ({{ maintenance_count }})</span>
                </div>
            </div>

            <!-- Room Grid -->
            <div class="room-grid-container overflow-x-auto pb-2">
                <div class="grid grid-cols-8 md:grid-cols-12 lg:grid-cols-16 gap-2 min-w-max" id="roomGrid">
                    {% for room in rooms %}
                    <div class="flex flex-col items-center justify-center p-2 rounded-lg border transition-all duration-200 hover:scale-105 cursor-pointer 
                        {% if room.status|lower == 'available' %} bg-hotel-green text-white border-hotel-green
                        {% elif room.status|lower == 'occupied' %} bg-hotel-red text-white border-hotel-red
                        {% elif room.status|lower == 'maintenance' %} bg-hotel-yellow text-black border-hotel-yellow
                        {% else %} bg-gray-500 text-white border-gray-500
                        {% endif %}" title="Room {{ room.room_number }} - {{ room.room_type }} ({{ room.status }})">
                        <div class="font-bold text-sm">{{ room.room_number }}</div>
                        <div class="text-xs opacity-80 mt-1">{{ room.room_type }}</div>
                    </div>
                    {% empty %}
                    <div class="col-span-full text-center py-4 text-gray-400">
                        No rooms found in the database.
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Check-in Sections -->
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            <!-- New Check-in Form Section -->
            <div class="lg:col-span-8 bg-gray-800 rounded-lg p-6 border border-gray-600 shadow-md">
                <h2 class="text-2xl font-semibold mb-5 flex items-center">
                    <i class="fas fa-plus-circle mr-2"></i> New Booking
                </h2>

       <form method="POST" action="{% url 'add_booking' %}">
   
                    {% csrf_token %}

                    <!-- Guest Name -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
                        <div>
                            <label for="firstName" class="block text-sm font-medium text-gray-300 mb-1">First Name
                                *</label>
                            <input type="text" id="firstName" name="firstName" required placeholder="Enter first name"
                                class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                        </div>
                        <div>
                            <label for="lastName" class="block text-sm font-medium text-gray-300 mb-1">Last Name
                                *</label>
                            <input type="text" id="lastName" name="lastName" required placeholder="Enter last name"
                                class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                        </div>
                    </div>

                    <!-- Email and Phone -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-300 mb-1">Email Address
                                *</label>
                            <input type="email" id="email" name="email" required placeholder="guest@example.com"
                                class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                        </div>
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-300 mb-1">Phone Number
                                *</label>
                            <input type="tel" id="phone" name="phone" required placeholder="+91 12345 67890"
                                class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                        </div>
                    </div>

                    <!-- Room Selection -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="roomType" class="block text-sm font-medium text-gray-300 mb-2">Room Type
                                *</label>
                            <select id="roomType" name="roomType" required
                                class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                                <option value="">Select Room Type</option>
                                <option value="Standard">Standard</option>
                                <option value="Deluxe">Deluxe</option>
                                <option value="Suite">Suite</option>
                                <option value="Executive">Executive</option>
                            </select>
                        </div>
                        <div>
                            <label for="roomNumber" class="block text-sm font-medium text-gray-300 mb-2">Room Number
                                *</label>
                            <select id="roomNumber" name="roomNumber" required
                                class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                                <option value="">Select Room</option>
                                {% for room in available_rooms %}
                                <option value="{{ room.room_number }}">Room {{ room.room_number }} - {{ room.room_type }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <!-- Check-in and Check-out Dates -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="checkinDate" class="block text-sm font-medium text-gray-300 mb-2">Check-in Date
                                *</label>
                            <input type="date" id="checkinDate" name="checkinDate" required
                                class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                        </div>
                        <div>
                            <label for="checkoutDate" class="block text-sm font-medium text-gray-300 mb-2">Check-out
                                Date *</label>
                            <input type="date" id="checkoutDate" name="checkoutDate" required
                                class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                        </div>
                    </div>

                    <!-- Additional Fields -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div>
                            <label for="id_proof_type" class="block text-sm font-medium text-gray-300 mb-2">ID Proof
                                Type</label>
                            <select id="id_proof_type" name="id_proof_type"
                                class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                                <option value="Aadhaar">Aadhaar</option>
                                <option value="Passport">Passport</option>
                                <option value="Driver License">Driver License</option>
                                <option value="Voter ID">Voter ID</option>
                            </select>
                        </div>
                        <div>
                            <label for="id_proof_number" class="block text-sm font-medium text-gray-300 mb-2">ID Proof
                                Number</label>
                            <input type="text" id="id_proof_number" name="id_proof_number" placeholder="Enter ID number"
                                class="w-full p-3 border border-gray-600 rounded-lg bg-gray-700 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-base">
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="flex space-x-3">
                        <button type="button"
                            class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold">
                            <i class="fas fa-search mr-1"></i> Search Guest
                        </button>
                        <button type="submit"
                            class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold">
                            <i class="fas fa-check mr-1"></i> Complete Check-in
                        </button>
                    </div>
                </form>
            </div>

            <!-- Guest Directory -->
            <div class="lg:col-span-4 bg-gray-800 rounded-lg p-5 border border-gray-600 shadow-md">
                <h2 class="text-2xl font-semibold mb-4 flex items-center">
                    <i class="fas fa-list mr-2"></i> Today's Check-ins
                </h2>

                <!-- Table Container -->
                <div class="bg-gray-800 rounded-lg border border-gray-600 shadow-md overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-700">
                                <tr>
                                    <th class="p-3 text-left text-sm font-semibold text-gray-300">Room</th>
                                    <th class="p-3 text-left text-sm font-semibold text-gray-300">Guest</th>
                                    <th class="p-3 text-left text-sm font-semibold text-gray-300">Check-in</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-600">
                                {% for checkin in todays_checkins %}
                                <tr class="hover:bg-gray-700">
                                    <td class="p-3 text-sm font-bold">Room {{ checkin.booking.room.room_number }}</td>
                                    <td class="p-3 text-sm">{{ checkin.booking.guest.first_name }} {{checkin.booking.guest.last_name }}</td>
                                    <td class="p-3 text-sm">{{ checkin.actual_check_in|time }}</td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="3" class="p-3 text-sm text-center text-gray-400">No check-ins today
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>